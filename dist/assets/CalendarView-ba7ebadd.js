import{u as q}from"./index-1a4d3832.js";import{d as A,r,f as g,Z as P,$ as K,a0 as Q,c,a as l,b as d,u as n,k as m,M as X,o as b,i as k,a1 as Z,O as C,N as j,X as H,Q as V,U as F,m as S,t as D,K as x,y as J}from"./vendor-4ce8851e.js";const Y={class:"calendar-view"},ee={class:"calendar-header"},le={class:"calendar-actions"},te={class:"view-toggles"},ae={class:"calendar-container"},se={class:"p-fluid"},ie={class:"field"},de={class:"field"},ne={class:"field"},oe={class:"field"},ue={class:"field"},re={key:0,class:"field"},ve={key:0,class:"task-details"},pe={class:"detail-item"},ce={class:"detail-item"},me={class:"detail-item"},be={class:"detail-item"},ke={key:0,class:"detail-item"},De={class:"detail-item"},we=A({__name:"CalendarView",setup(fe){const o=q(),f=r("timeGridWeek"),p=r(!1),v=r("new"),y=r(!1),E=r(!1),u=r(null),i=r(null),a=r({type:"bellen",title:"",description:"",startDate:new Date,endDate:null}),L=[{label:"Call",value:"bellen"},{label:"Meeting",value:"afspraak"},{label:"Email",value:"mailen"},{label:"Research",value:"uitzoeken"}],$=[{label:"Month",value:"dayGridMonth"},{label:"Week",value:"timeGridWeek"},{label:"Day",value:"timeGridDay"}],M=t=>{switch(t){case"bellen":return{bg:"#4CAF50",border:"#388E3C",text:"#FFFFFF"};case"afspraak":return{bg:"#2196F3",border:"#1976D2",text:"#FFFFFF"};case"mailen":return{bg:"#FF9800",border:"#F57C00",text:"#000000"};case"uitzoeken":return{bg:"#9C27B0",border:"#7B1FA2",text:"#FFFFFF"};default:return{bg:"#757575",border:"#616161",text:"#FFFFFF"}}},U=g(()=>o.tasks.value.map(t=>{const e=M(t.type);return{id:t.id,title:t.title,start:t.scheduledDate,end:t.scheduledDate,backgroundColor:e.bg,borderColor:e.border,textColor:e.text,extendedProps:{type:t.type,leadId:t.leadId,completed:t.completed,description:t.description}}})),I=g(()=>({plugins:[P,K,Q],initialView:f.value,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,events:U.value,eventClick:_,select:B,eventDrop:G,eventResize:O,slotMinTime:"08:00:00",slotMaxTime:"20:00:00",allDaySlot:!1,slotDuration:"00:30:00",nowIndicator:!0})),B=t=>{a.value.startDate=t.start,a.value.endDate=t.end,v.value="new",p.value=!0},_=t=>{const e=o.tasks.value.find(w=>w.id===t.event.id);e&&(i.value=e,u.value=o.getLeadById(e.leadId),v.value="edit",p.value=!0)},G=t=>{o.updateTask(t.event.id,{scheduledDate:t.event.start.toISOString()})},O=t=>{o.updateTask(t.event.id,{scheduledDate:t.event.start.toISOString()})},h=()=>{u.value&&(o.addTask({type:a.value.type,title:a.value.title,description:a.value.description,scheduledDate:a.value.startDate.toISOString(),completed:!1,leadId:u.value.id}),T())},N=()=>{i.value&&(o.updateTask(i.value.id,{type:a.value.type,title:a.value.title,description:a.value.description,scheduledDate:a.value.startDate.toISOString()}),T())},T=()=>{p.value=!1,i.value=null,u.value=null,a.value={type:"bellen",title:"",description:"",startDate:new Date,endDate:null}},R=()=>{i.value&&(E.value=!0,u.value=o.getLeadById(i.value.leadId),a.value={type:i.value.type,title:i.value.title,description:i.value.description||"",startDate:new Date(i.value.scheduledDate),endDate:null},y.value=!1,p.value=!0)},W=t=>o.leads.value.find(e=>e.id===t),z=t=>new Date(t).toLocaleString();return(t,e)=>{const w=X("SelectButton");return b(),c("div",Y,[l("div",ee,[e[11]||(e[11]=l("h1",null,"Calendar",-1)),l("div",le,[d(n(k),{icon:"pi pi-plus",label:"New Task",onClick:e[0]||(e[0]=s=>t.showNewTaskDialog=!0)}),l("div",te,[d(w,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=s=>f.value=s),options:$},null,8,["modelValue"])])])]),l("div",ae,[d(n(Z),{ref:"calendarRef",options:I.value},null,8,["options"])]),d(n(S),{visible:p.value,"onUpdate:visible":e[9]||(e[9]=s=>p.value=s),header:v.value==="new"?"Create Task":"Edit Task",modal:!0,class:"task-dialog"},{footer:m(()=>[d(n(k),{label:"Cancel",icon:"pi pi-times",onClick:T,class:"p-button-text"}),d(n(k),{label:v.value==="new"?"Create":"Update",icon:"pi pi-check",onClick:e[8]||(e[8]=s=>v.value==="new"?h():N()),disabled:!a.value.title||!a.value.type||!a.value.startDate||v.value==="new"&&!u.value},null,8,["label","disabled"])]),default:m(()=>[l("div",se,[l("div",ie,[e[12]||(e[12]=l("label",{for:"taskType"},"Type",-1)),d(n(C),{id:"taskType",modelValue:a.value.type,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.type=s),options:L,optionLabel:"label",optionValue:"value",placeholder:"Select Type"},null,8,["modelValue"])]),l("div",de,[e[13]||(e[13]=l("label",{for:"taskTitle"},"Title",-1)),d(n(j),{id:"taskTitle",modelValue:a.value.title,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.title=s),required:"",autofocus:""},null,8,["modelValue"])]),l("div",ne,[e[14]||(e[14]=l("label",{for:"taskDescription"},"Description",-1)),d(n(H),{id:"taskDescription",modelValue:a.value.description,"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.description=s),rows:"3"},null,8,["modelValue"])]),l("div",oe,[e[15]||(e[15]=l("label",{for:"taskStart"},"Start",-1)),d(n(V),{id:"taskStart",modelValue:a.value.startDate,"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.startDate=s),showTime:"",required:""},null,8,["modelValue"])]),l("div",ue,[e[16]||(e[16]=l("label",{for:"taskEnd"},"End",-1)),d(n(V),{id:"taskEnd",modelValue:a.value.endDate,"onUpdate:modelValue":e[6]||(e[6]=s=>a.value.endDate=s),showTime:""},null,8,["modelValue"])]),v.value==="new"?(b(),c("div",re,[e[17]||(e[17]=l("label",{for:"taskLead"},"Lead",-1)),d(n(C),{id:"taskLead",modelValue:u.value,"onUpdate:modelValue":e[7]||(e[7]=s=>u.value=s),options:n(o).leads.value,optionLabel:"name",placeholder:"Select Lead"},null,8,["modelValue","options"])])):F("",!0)])]),_:1},8,["visible","header"]),d(n(S),{visible:y.value,"onUpdate:visible":e[10]||(e[10]=s=>y.value=s),modal:!0,header:"Task Details",style:{width:"400px"}},{footer:m(()=>[d(n(k),{label:"Edit",icon:"pi pi-pencil",onClick:R})]),default:m(()=>{var s;return[i.value?(b(),c("div",ve,[l("div",pe,[e[18]||(e[18]=l("label",null,"Lead:",-1)),l("span",null,D((s=W(i.value.leadId))==null?void 0:s.name),1)]),l("div",ce,[e[19]||(e[19]=l("label",null,"Type:",-1)),d(n(x),{value:i.value.type},null,8,["value"])]),l("div",me,[e[20]||(e[20]=l("label",null,"Title:",-1)),l("span",null,D(i.value.title),1)]),l("div",be,[e[21]||(e[21]=l("label",null,"Date:",-1)),l("span",null,D(z(i.value.scheduledDate)),1)]),i.value.description?(b(),c("div",ke,[e[22]||(e[22]=l("label",null,"Description:",-1)),l("p",null,D(i.value.description),1)])):F("",!0),l("div",De,[e[23]||(e[23]=l("label",null,"Status:",-1)),d(n(x),{value:i.value.completed?"Completed":"Pending",severity:i.value.completed?"success":"warning"},null,8,["value","severity"])])])):F("",!0)]}),_:1},8,["visible"]),d(n(J))])}}});export{we as default};
//# sourceMappingURL=CalendarView-ba7ebadd.js.map
