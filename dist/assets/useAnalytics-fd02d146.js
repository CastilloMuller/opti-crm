import{u as w}from"./index-1a4d3832.js";import{f as u,D as l}from"./vendor-4ce8851e.js";function L(){const n=w(),h=u(()=>{const t=n.leads.length,s=n.leads.filter(e=>e.status==="new").length,o=n.leads.filter(e=>e.status==="contacted").length,a=n.leads.filter(e=>e.status==="qualified").length,c=n.leads.filter(e=>e.status==="negotiating").length,r=n.leads.filter(e=>e.status==="closed").length,i=n.leads.filter(e=>e.status==="lost").length;return{"New Leads":{count:s,percentage:s/t*100},Contacted:{count:o,percentage:o/t*100},Qualified:{count:a,percentage:a/t*100},Negotiating:{count:c,percentage:c/t*100},Closed:{count:r,percentage:r/t*100},Lost:{count:i,percentage:i/t*100}}}),m=u(()=>{const t={};return n.leads.forEach(s=>{t[s.status]=(t[s.status]||0)+1}),t}),f=u(()=>{const t={High:0,Medium:0,Low:0};return n.leads.forEach(s=>{s.priority&&s.priority>=8?t.High++:s.priority&&s.priority>=5?t.Medium++:t.Low++}),t}),g=u(()=>{const t=l.now(),s=t.minus({days:30}),o=n.tasks.filter(a=>{const c=l.fromISO(a.scheduledDate);return c>=s&&c<=t});return{completed:o.filter(a=>a.completed).length,inProgress:o.filter(a=>!a.completed).length,recentTasks:o}}),p=u(()=>{const t=l.now(),s=t.minus({days:30}),o=n.communications.filter(r=>{const i=l.fromISO(r.timestamp);return i>=s&&i<=t}),a={outbound:o.filter(r=>r.type==="outbound").length,inbound:o.filter(r=>r.type==="inbound").length},c=o.reduce((r,i)=>(r[i.method]=(r[i.method]||0)+1,r),{});return{byType:a,byMethod:c,recentCommunications:o}}),y=u(()=>{const t=l.now(),s=t.minus({months:6}),o=[],a=[];let c=s.startOf("month");for(;c<=t;){const r=c.toFormat("MMM yyyy");o.push(r);const i=n.leads.filter(e=>!e.quotationValue||e.status!=="closed"?!1:l.fromISO(e.updatedAt).hasSame(c,"month")).reduce((e,d)=>e+(d.quotationValue||0),0);a.push(i),c=c.plus({months:1})}return{months:o,values:a}});return{leadFunnel:h,leadsByStatus:m,leadsByPriority:f,taskStats:g,communicationStats:p,revenueStats:y,refreshAnalytics:()=>{n.fetchLeads(),n.fetchTasks(),n.fetchCommunications()}}}export{L as u};
//# sourceMappingURL=useAnalytics-fd02d146.js.map
