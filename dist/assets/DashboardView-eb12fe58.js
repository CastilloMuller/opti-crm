import{d as j,f as d,D as a,c as O,a as e,t as i,u as n,b as l,k as m,E as I,o as R,G as g,i as w,H as $,I as v,J as V,K as L,L as N}from"./vendor-4ce8851e.js";import{u as A}from"./useAnalytics-fd02d146.js";import{u as E,a as B,_ as H}from"./index-1a4d3832.js";const F={class:"grid"},J={class:"col-12 md:col-6 lg:col-3"},U={class:"surface-card p-4 border-round shadow-1"},q={class:"flex justify-content-between mb-3"},z={class:"text-900 font-medium text-xl"},G={class:"text-green-500 font-medium"},K={class:"col-12 md:col-6 lg:col-3"},W={class:"surface-card p-4 border-round shadow-1"},Q={class:"flex justify-content-between mb-3"},X={class:"text-900 font-medium text-xl"},Y={class:"text-500"},Z={class:"col-12 md:col-6 lg:col-3"},P={class:"surface-card p-4 border-round shadow-1"},ee={class:"flex justify-content-between mb-3"},te={class:"text-900 font-medium text-xl"},se={class:"text-{{ conversionMetrics.conversionTrend > 0 ? 'green' : 'red' }}-500 font-medium"},oe={class:"col-12 md:col-6 lg:col-3"},ne={class:"surface-card p-4 border-round shadow-1"},ie={class:"flex justify-content-between mb-3"},ae={class:"text-900 font-medium text-xl"},le={class:"text-{{ performanceMetrics.revenueTrend > 0 ? 'green' : 'red' }}-500 font-medium"},de={class:"col-12 lg:col-6"},re={class:"surface-card p-4 border-round shadow-1"},ce={class:"col-12 lg:col-6"},ue={class:"surface-card p-4 border-round shadow-1"},me={class:"col-12 lg:col-6"},pe={class:"surface-card p-4 border-round shadow-1"},ve={class:"flex justify-content-between align-items-center mb-4"},fe={class:"flex flex-column"},be={class:"text-color-secondary mb-1"},_e={class:"font-medium mb-1"},he={class:"text-color-secondary m-0"},xe={class:"col-12 lg:col-6"},ye={class:"surface-card p-4 border-round shadow-1"},ge={class:"flex justify-content-between align-items-center mb-4"},we=j({__name:"DashboardView",setup(ke){I();const r=E(),{leadMetrics:c,leadFunnel:De,activityMetrics:Me,performanceMetrics:u,conversionMetrics:f}=A(),{isConnected:p,lastMessage:b}=B();d(()=>({status:p.value?"Connected":"Disconnected",class:p.value?"status-connected":"status-disconnected",icon:p.value?"pi pi-check-circle":"pi pi-exclamation-triangle"})),d(()=>b.value?a.fromJSDate(b.value).toRelative():"Never");const k=d(()=>({labels:Object.keys(c.value.statusCounts),datasets:[{data:Object.values(c.value.statusCounts),backgroundColor:["#3e5b82","#4a6b92","#567ba2","#628bb2","#6e9bc2","#7aabd2","#86bbe2"]}]})),D=d(()=>({labels:u.value.monthly.map(s=>s.month),datasets:[{label:"Revenue",data:u.value.monthly.map(s=>s.revenue),borderColor:"#4BC0C0",tension:.4}]})),_={plugins:{legend:{position:"bottom"}}},h=d(()=>{const s=a.now().startOf("day"),t=r.tasks.filter(o=>{const y=a.fromISO(o.scheduledDate);return y>=s&&y<s.plus({days:1})});return{total:t.length,completed:t.filter(o=>o.completed).length}}),M=d(()=>{const s=a.now();return r.tasks.filter(t=>!t.completed&&a.fromISO(t.scheduledDate)>=s).sort((t,o)=>a.fromISO(t.scheduledDate).toMillis()-a.fromISO(o.scheduledDate).toMillis()).slice(0,5)}),S=d(()=>{const s=[];return r.tasks.forEach(t=>{t.completed&&s.push({type:"task",icon:"pi pi-check-circle",title:`Completed task: ${t.title}`,description:t.description,timestamp:t.scheduledDate})}),r.communications.forEach(t=>{s.push({type:"communication",icon:t.type==="inbound"?"pi pi-arrow-down":"pi pi-arrow-up",title:`${t.type==="inbound"?"Received":"Sent"} ${t.method}: ${t.content.substring(0,50)}...`,description:t.content,timestamp:t.timestamp})}),s.sort((t,o)=>a.fromISO(o.timestamp).toMillis()-a.fromISO(t.timestamp).toMillis()).slice(0,10)}),T=s=>new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(s),x=s=>a.fromISO(s).toFormat("dd MMM HH:mm"),C=s=>({High:"danger",Medium:"warning",Low:"success"})[s];return(s,t)=>(R(),O("div",F,[e("div",J,[e("div",U,[e("div",q,[e("div",null,[t[0]||(t[0]=e("span",{class:"block text-500 font-medium mb-3"},"Total Leads",-1)),e("div",z,i(n(c).total),1)]),t[1]||(t[1]=e("div",{class:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-users text-blue-500 text-xl"})],-1))]),e("span",G,i(n(c).new)+" new ",1),t[2]||(t[2]=e("span",{class:"text-500"},"since last week",-1))])]),e("div",K,[e("div",W,[e("div",Q,[e("div",null,[t[3]||(t[3]=e("span",{class:"block text-500 font-medium mb-3"},"Open Tasks",-1)),e("div",X,i(h.value.total),1)]),t[4]||(t[4]=e("div",{class:"flex align-items-center justify-content-center bg-orange-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-check-square text-orange-500 text-xl"})],-1))]),e("span",Y,i(h.value.completed)+" completed this week",1)])]),e("div",Z,[e("div",P,[e("div",ee,[e("div",null,[t[5]||(t[5]=e("span",{class:"block text-500 font-medium mb-3"},"Conversion Rate",-1)),e("div",te,i(n(f).conversionRate)+"%",1)]),t[6]||(t[6]=e("div",{class:"flex align-items-center justify-content-center bg-cyan-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-percentage text-cyan-500 text-xl"})],-1))]),e("span",se,i(Math.abs(n(f).conversionTrend))+"% ",1),t[7]||(t[7]=e("span",{class:"text-500"},"vs last month",-1))])]),e("div",oe,[e("div",ne,[e("div",ie,[e("div",null,[t[8]||(t[8]=e("span",{class:"block text-500 font-medium mb-3"},"Revenue",-1)),e("div",ae,"â‚¬"+i(T(n(u).revenue)),1)]),t[9]||(t[9]=e("div",{class:"flex align-items-center justify-content-center bg-purple-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-euro text-purple-500 text-xl"})],-1))]),e("span",le,i(n(u).revenueTrend)+"% ",1),t[10]||(t[10]=e("span",{class:"text-500"},"vs last month",-1))])]),e("div",de,[e("div",re,[t[11]||(t[11]=e("h3",null,"Lead Status Distribution",-1)),l(n(g),{type:"pie",data:k.value,options:_},null,8,["data"])])]),e("div",ce,[e("div",ue,[t[12]||(t[12]=e("h3",null,"Revenue Trend",-1)),l(n(g),{type:"line",data:D.value,options:_},null,8,["data"])])]),e("div",me,[e("div",pe,[e("div",ve,[t[13]||(t[13]=e("h3",null,"Recent Activities",-1)),l(n(w),{label:"View All",link:""})]),l(n($),{value:S.value,class:"customized-timeline"},{content:m(o=>[e("div",fe,[e("small",be,i(x(o.item.timestamp)),1),e("span",_e,i(o.item.title),1),e("p",he,i(o.item.description),1)])]),_:1},8,["value"])])]),e("div",xe,[e("div",ye,[e("div",ge,[t[14]||(t[14]=e("h3",null,"Upcoming Tasks",-1)),l(n(w),{label:"View All",link:""})]),l(n(N),{value:M.value,rows:5,paginator:!1,class:"p-datatable-sm"},{default:m(()=>[l(n(v),{field:"title",header:"Task"}),l(n(v),{field:"scheduledDate",header:"Due Date"},{body:m(o=>[V(i(x(o.data.scheduledDate)),1)]),_:1}),l(n(v),{field:"priority",header:"Priority"},{body:m(o=>[l(n(L),{value:o.data.priority,severity:C(o.data.priority)},null,8,["value","severity"])]),_:1})]),_:1},8,["value"])])])]))}});const je=H(we,[["__scopeId","data-v-82d22e2e"]]);export{je as default};
